<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width">
    <title>어라운드 달콤창고</title>
    <style>
        #description .images {
            text-align: center;
        }
        #description .images img {
            width: 60%;
            min-width: 300px;
            margin: auto;
        }
        #map {
            height: 320px;
        }
        @media (max-width:768px){
            #map {
                height: 280px;
            }
        }
        @media (max-width:450px){
            #map {
                height: 210px;
            }
        }
    </style>
</head>
<body style="max-width:800px;padding:0;margin:0;">
<h1 style="padding:10px 0px 0px 0px;margin:0px;"><a href="/" style="color:#333;text-decoration: none;">어라운드 달콤창고</a></h1><span style="font-size:13px;color:#666;">달콤한 간식과 쪽지를 나누는 달콤창고 위치를 담은 달콤지도입니다. 비밀번호는 어라운드 어플에서 확인하세요~!</br>등록문의는 jeonghuns99@hanmail.net 으로 주세요. (위치,종료일,사진 필수!)</span>
</br><span style="font-size:12px;color:#666;">7월 29일 업데이트</span>
<div style="margin:10px 0;width:100%;float:left;padding:0;">
    <form id="searchForm">
        <input type="text" id="search" style="height:30px;width:95%;float:left;"><button type="submit" style="float:left;width:100px;height:25px;margin-top:5px;margin-left:-110px;">검색</button>
    </form>
</div>
<div id="map" style="width:100%;"></div>
<div id="description" style="border-top:1px solid #ddd;margin-top:20px;padding-top:5px;width:100%;">
    <h2 class="title"></h2>
    <p class="duration"></p>
    <p class="keyword"></p>
    <p class="text">어라운드 달콤창고는 이 글로부터 시작됐다고 합니다.</p>
    <div class="images" style="width:100%;"><img src="./images/gangnam.jpg"></div>
</div>

<script type="text/javascript" src="//apis.daum.net/maps/maps3.js?apikey=8f136b27e2e8cb047b70b7c4ac91b5d1&libraries=services"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>


<script>
    var latlng = function(l) {
        var v = l.split(',');
        return new daum.maps.LatLng(v[0], v[1]);
    };
    var items = [
        {
            name: '강남역',
            latlng: '37.498319594791155,127.02843009341994',
            description: '강남역 달콤창고입니다. 위치는 1번출구에서 개찰구 지나서 화장실 옆 사물함입니다.',
            keyword: '강남역 달콤창고',
            forceEnded: true,
            images: [
                    './images/gangna-3.png',
                    './images/gangna-1.png',
                    './images/gangna-2.png',
                    'https://scontent.xx.fbcdn.net/hphotos-xta1/t31.0-8/1496506_1530950983834943_1838317777655519330_o.jpg',
                    'https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-xfp1/v/t1.0-9/10943637_1405545413073617_276940928419772991_n.jpg?oh=d9fa10d39fed663c19122e9c7556e0ac&oe=55DAA527&__gda__=1440846766_ef73ebb8bca83923e12c042eb9e41efe',
                    'https://fbcdn-sphotos-h-a.akamaihd.net/hphotos-ak-xfp1/v/t1.0-9/10945631_348076825393644_1528834950412882483_n.jpg?oh=de5d78e9581ccf40c9815cad2f37470d&oe=55C68072&__gda__=1443740155_181b50448eab0ca0533d25985adeb720']
        },
        {
            name: '합정',
            latlng: '37.54905407655182,126.91385980610694',
            description: '1/2번 출구쪽 사물함입니다.',
            keyword: '합정역 달콤창고',
            startDate: '2015-07-05',
            endDate: '2015-08-04',
            images: [
                    './images/hapjeong1.png'
            ]
        },
        {
            name: '일산 라페스타',
            latlng: '37.66119043776487,126.7690997590325',
            description: '라페스타 C동 롯데시네마 건물 1층 엘레베이터 앞 물품보관함',
            keyword: '#일산달콤창고 또는 #라페스타',
            startDate: '2015-07-12',
            endDate: '2015-08-11',
            images: [
                './images/ilsanlape.png'
            ]
        },
        {
            name: '종로3가',
            latlng: '37.57056501065246,126.99225737788247',
            description: '종로3가역 물품보관함',
            keyword: '종로3가 달콤창고',
            startDate: '2015-05-08',
            endDate: '2015-08-06',
            images: [
                './images/jong3-2.jpg',
                './images/jong3.jpg'
            ]
        },
        {
            name: '동아대학교 승학캠',
            latlng: '35.11641839470421,128.96722866921198',
            description: '동아대학교 승학캠 공대2호관 p2102옆 사물함',
            keyword: '동아대학교 달콤창고',
            startDate: '2015-05-08',
            endDate: '2015-08-31',
            images: [
                './images/donga-sh.jpg'
            ]
        },
        {
            name: '안암역',
            latlng: '37.58636503086245,127.02943723904436',
            description: '안암역 사물함입니다.',
            keyword: '안암역 달콤창고',
            forceEnded: true,
            images: [
                './images/anam.jpg'
            ]
        },
        {
            name: '신림역',
            latlng: '37.48442661083869,126.92974070299358',
            description: '신림역 1번출구 포도몰 입구앞 사물함입니다.',
            keyword: '신림역 달콤창고',
            forceEnded: true,
            images: [
                './images/sinlim1.jpg'
            ]
        },
        {
            name: '광주 금남로4가역',
            latlng: '35.15073895531338,126.9145471768349',
            description: '광주 금남로4가 cu옆 사물함',
            keyword: '금남로4가역 달콤창고',
            startDate: '2015-05-07',
            endDate: '2015-05-14',
            images: [
                './images/kwangju1.jpg',
                './images/kwangju2.jpg',
                './images/kwangju3.png'
            ]
        },
        {
            name: '노원역',
            latlng: '37.65639440291111,127.06346278261645',
            description: '4호선 라인쪽 물품보관소',
            keyword: '노원역 달콤창고',
            startDate: '2015-05-07',
            endDate: '2015-08-22',
            images: [
                './images/nowon1.jpg',
                './images/nowon2.jpg'
            ]
        },
        {
            name: '수원역',
            latlng: '37.266255245587345,127.00006764348147',
            description: '수원역 엘리베이터 만드는곳 쪽 보관소',
            keyword: '수원역 달콤창고',
            forceEnded: true,
            images: [
                './images/suwon.jpg',
                './images/suwon3.png',
            ]
        },
        {
            name: '수원시청역',
            latlng: '37.26187212785104,127.03097891869068',
            description: '수원시청역 개인 사물함',
            keyword: '수원시청역달콤창고',
            forceEnded: true,
            images: [
                './images/suwonsichung.png',
            ]
        },
        {
            name: '용인대학교 보건복지대학',
            latlng: '37.22841128593169,127.16662958557465',
            description: '용인대학교 보건복지 대학 6층 사물함',
            keyword: '용인대학교 달콤창고',
            startDate: '2015-05-07',
            endDate: '2015-05-21',
            images: [
                './images/yongin.jpg'
            ]
        },
        {
            name: '서울역',
            latlng: '37.55315481179077,126.97252235045936',
            description: '서울역4호선 라인',
            keyword: '서울역 달콤창고',
            forceEnded: true,
            images: [
                './images/seoul1.jpg'
            ]
        },
        {
            name: '대전 중앙로',
            latlng: '36.32843104531424,127.42531012568494',
            description: '대전 중앙로4번 출구쪽',
            keyword: '대전 달콤창고',
            forceEnded: true,
            images: [
                './images/junganro.png'
            ]
        },
        {
            name: '울산대',
            latlng: '35.543787099524884,129.25607003500008',
            description: '울산대 구아산 휴게실',
            keyword: '울산대 달콤창고',
            startDate: '2015-03-13',
            endDate: '2015-08-11',
            images: [

            ]
        },
        {
            name: '경희대 국제캠퍼스',
            latlng: '37.24317866987126,127.08126011997419',
            description: '경희대 국제캠퍼스 생명과학대학건물 사물함',
            keyword: '경희대 달콤창고',
            startDate: '2015-07-27',
            endDate: '2015-08-27',
            images: [
                './images/gyeongheegukjae1.png',
				'./images/gyeongheegukjae2.png',
				'./images/gyeongheegukjae3.png'
            ]
        },
        {
            name: '아주대',
            latlng: '37.28241159321083,127.04438360643643',
            description: '',
            keyword: '아주대 달콤창고',
            forceEnded: true,
            images: [
                './images/aju1.png',
                './images/aju.png'
            ]
        },
        {
            name: '국회의사당역',
            latlng: '37.528207712984866,126.91775290348362',
            description: '',
            keyword: '직장인의 힐링박스',
            forceEnded: true,
            images: [
                './images/line9.png'
            ]
        },
        {
            name: '잠실역',
            latlng: '37.51366864794273,127.10141462973444',
            description: '',
            keyword: '잠실역 달콤창고',
            forceEnded: true,
            images: [
                './images/jamsil.png'
            ]
        },
        {
            name: '구미여자고등학교',
            latlng: '36.14464058059795,128.33198159177323',
            description: '학교에서 하는 달콤 창고 ㅎㅎ',
            keyword: '구미 달콤창고',
            forceEnded: true,
            images: [
                './images/gumi.png'
            ]
        },
        {
            name: '모란역',
            latlng: '37.43397404635372,127.1293963568477',
            description: '모란역 8호선 사물함',
            keyword: '모란역 달콤상자',
            forceEnded: true,
            images: [
            ]
        },
        {
            name: '대방역',
            latlng: '37.51353639232563,126.92689698435291',
            description: '대방역 6번 출구쪽 물품 보관함',
            keyword: '대방역 달콤창고',
            startDate: '2015-07-14',
            endDate: '2015-08-13',
            images: [
                './images/daebang.png'
            ]
        },
        {
            name: '경북대',
            latlng: '35.89197569179732,128.6126547097055',
            description: '대구 경북대학교 중앙도서관 신관 1층 사물함',
            keyword: '경북대 달콤상자',
            startDate: '2015-05-10',
            endDate: '2015-08-31',
            images: [
                './images/kbu2.jpg',
                './images/kbu3.jpg',
                './images/kbu.jpg'
            ]
        },
        {
            name: '건대입구역',
            latlng: '37.539901455481164,127.07022079732278',
            description: '건대입구역 5번출구쪽 물품보관함',
            keyword: '건대입구 달콤창고',
            forceEnded: true,
            images: [
                './images/gundae.jpg'
            ]
        },
        {
            name: '왕십리역',
            latlng: '37.561387965146274,127.03490543440084',
            description: '왕십리역 10번 11번출구방향 물품보관함',
            keyword: '왕십리 달콤창고',
            forceEnded: true,
            images: [
                './images/wang.jpg'
            ]
        },
        {
            name: '송내역',
            latlng: '37.48767639102123,126.75308696722858',
            description: '송내역 개찰구 옆',
            keyword: '송내역 달콤창고',
            forceEnded: true,
            images: [
                './images/songnae.jpg'
            ]
        },
        {
            name: '강동구 길동',
            latlng: '37.53531022868805,127.13944295701631',
            description: '강동구 길동 달콤창고!',
            keyword: '강동구 달콤창고',
            forceEnded: true,
            images: [
                './images/gildong.jpeg'
            ]
        },
		{
            name: '노량진역',
            latlng: '37.514022315590516,126.94201941860337',
            description: '노량진역 보관함',
            keyword: '노량진역 달콤창고',
            startDate: '2015-07-28',
            endDate: '2015-08-28',
            images: [
                './images/noryang.png'
            ]
        },
		{
            name: '연세대',
            latlng: '37.56035801055014,126.93666403537942',
            description: '연세대 외솔관 지하',
            keyword: '연세대 달콤창고',
            startDate: '2015-07-06',
            endDate: '2015-08-28',
            images: [
                './images/yonsei.png'
            ]
        },
		{
            name: '대전역',
            latlng: '36.3317514795132,127.4341937668053',
            description: '대전역 지하철 4번출구 곧 이사 예정^^',
            keyword: '대전역 달콤창고',
            startDate: '2015-07-22',
            endDate: '2015-08-21',
            images: [
                './images/daejeon.png'
            ]
        },
		{
            name: '등촌역',
            latlng: '37.55073890287848,126.86558117308724',
            description: '등촌역 1번출구',
            keyword: '등촌역 달콤창고',
            startDate: '2015-06-07',
            endDate: '2015-08-06',
            images: [
                './images/deungchon.png'
            ]
        },
		{
            name: '전주 한옥마을',
            latlng: '35.81478114944289,127.1524773397153',
            description: '전주 한옥마을 정자 앞',
            keyword: '전주 한옥마을 달콤창고',
            startDate: '2015-07-06',
            endDate: '2015-08-28',
            images: [
                './images/jeonju1.png',
				'./images/jeonju2.png'
            ]
        },
		{
            name: '불광역',
            latlng: '37.61031442903407,126.93021138171937',
            description: '불광역 1번출구',
            keyword: '불광역 달콤창고',
            startDate: '2015-07-05',
            endDate: '2015-08-04',
            images: [
                './images/bulkwang.png'
            ]
        },
		{
            name: '서울시립대',
            latlng: '37.582551682546,127.05916583030717',
            description: '서울시립대 자연과학관 2층',
            keyword: '서울시립대 달콤창고',
            startDate: '2015-07-09',
            endDate: '2015-08-28',
            images: [
                './images/seoulpublic.png'
            ]
        },
		{
            name: '충남대',
            latlng: '36.370122548742486,127.34616417381022',
            description: '충남대학교 중앙도서관 2층',
            keyword: '충남대 달콤창고',
            startDate: '2015-05-24',
            endDate: '2015-08-28',
            images: [
                './images/chungnauniv1.png',
				'./images/chungnauniv2.png',
				'./images/chungnauniv3.png',
				'./images/chungnauniv4.png',
            ]
        },
		{
            name: '고덕역',
            latlng: '37.55493123452604,127.15432207951451',
            description: '고덕역 4번출구 오말금 김밥집',
            keyword: '고덕역 달콤창고',
            startDate: '2015-06-18',
            endDate: '2015-08-18',
            images: [
                './images/goduk1.jpg',
				'./images/goduk2.jpg',
				'./images/goduk3.jpg',
				'./images/goduk4.jpg',
            ]
        },
		{
            name: '강변역',
            latlng: '37.53465836162972,127.09494870143857',
            description: '강변역 3번출구 세븐일레븐 앞',
            keyword: '강변역 달콤창고',
            startDate: '2015-06-04',
            endDate: '2015-08-03',
            images: [
                './images/riverside.png'
            ]
        },
		{
            name: '안양역',
            latlng: '37.40158290950144,126.92266892282706',
            description: '안양역 앞 Cafe BOM 2층',
            keyword: '안양역 달콤창고',
            startDate: '2015-07-28',
            endDate: '2015-08-27',
            images: [
                './images/anyang1.png',
				'./images/anyang2.png'
            ]
        },
		{
            name: '이태원역',
            latlng: '37.53452519188123,126.9940657160079',
            description: '이태원역 물품보관소',
            keyword: '이태원역 달콤창고',
            startDate: '2015-07-28',
            endDate: '2015-08-27',
            images: [
                './images/itaewon.jpg'
            ]
        },
		{
            name: '천안역',
            latlng: '36.810634624684326,127.1466290955798',
            description: '천악역 지하상가에서 동남구청 방면 광장',
            keyword: '천안역 달콤창고',
            startDate: '2015-07-26',
            endDate: '2015-08-25',
            images: [
                './images/cheonan1.jpg',
				'./images/cheonan2.jpg'
            ]
        },
		{
            name: '이화외고',
            latlng: '37.565592178844575,126.96890706319319',
            description: '이화외국어고등학교 나눔창고 EGG',
            keyword: '이화외고 나눔창고',
            startDate: '2015-07-21',
            endDate: '2015-08-28',
            images: [
                './images/ewhahigh.jpg'
            ]
        },
		{
            name: '파주 교하도서관',
            latlng: '37.72329139273616,126.71232358384351',
            description: '파주 교하도서관 2층',
            keyword: '전주 한옥마을 달콤창고',
            startDate: '2015-05-05',
            endDate: '2015-08-13',
            images: [
                './images/paju.png'
            ]
        },
		{
            name: '국민대',
            latlng: '37.60953317083312,126.99825586895831',
            description: '국민대 콘서트홀 3층',
            keyword: '국민대 달콤창고',
            startDate: '2015-05-19',
            endDate: '2015-08-28',
            images: [
                './images/kukmin.jpg'
            ]
        },
		{
            name: '고려대',
            latlng: '37.58852682061622,127.03172520352213',
            description: '고려대 문과대학 서관 오른쪽날개',
            keyword: '고려대 달콤창고',
            startDate: '2015-07-04',
            endDate: '2015-08-28',
            images: [
                './images/koryeo.png'
            ]
        },
		{
            name: '경희대 서울캠퍼스',
            latlng: '37.59748296955674,127.055361564878',
            description: '경희대 서울캠퍼스 정경대학 1층',
            keyword: '경희대 서울캠퍼스 달콤창고',
            startDate: '2015-05-14',
            endDate: '2015-08-28',
            images: [
                './images/kyeonghee.jpg'
            ]
        }
		


    ];
</script>
<script>
    var mapContainer = document.getElementById('map'), // 지도를 표시할 div
            mapOption = {
                center: new daum.maps.LatLng(35.750701, 126.570667), // 지도의 중심좌표
                level: 20 // 지도의 확대 레벨
            };

    var map = new daum.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

    // 마커 이미지의 이미지 크기 입니다
    var imageSize = new daum.maps.Size(32, 32);

    // 마커 이미지를 생성합니다
    var activeMarkerImage = new daum.maps.MarkerImage("./images/icon-active.png?1", imageSize);
    var inactiveMarkerImage = new daum.maps.MarkerImage("./images/icon-inactive.png?1", imageSize);

    var activeItems = [];
    var inactiveItems = [];
    for (var i = 0; i < items.length; i ++) {
        if (moment(items[i].endDate).isBefore(moment().format('YYYY-MM-DD'))) {
            inactiveItems.push(items[i]);
        } else {
            activeItems.push(items[i]);
        }
    }

    items = $.merge(inactiveItems, activeItems);

    for (var i = 0; i < items.length; i ++) {
        // 마커를 생성합니다
        var marker = new daum.maps.Marker({
            map: map, // 마커를 표시할 지도
            position: latlng(items[i].latlng), // 마커를 표시할 위치
            title : items[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
            image : (items[i].forceEnded || !items[i].endDate || moment(items[i].endDate).isBefore(moment().format('YYYY-MM-DD'))) ? inactiveMarkerImage : activeMarkerImage, // 마커 이미지
            clickable: true
        });

        (function(marker, idx) {
            daum.maps.event.addListener(marker, 'click', function() {
                selectItem(idx);
            });
        })(marker, i)

    }

    daum.maps.event.addListener(map, 'click', function(mouseEvent) {

        // 클릭한 위도, 경도 정보를 가져옵니다
        var latlng = mouseEvent.latLng;

        var message = latlng.getLat() + ',' + latlng.getLng();
        if (console && console.log && typeof console.log == "function") {
            console.log(message);
        }
    });

    // 장소 검색 객체를 생성합니다
    var ps = new daum.maps.services.Places();

    // 키워드 검색 완료 시 호출되는 콜백함수 입니다
    function placesSearchCB (status, data, pagination) {
        if (status === daum.maps.services.Status.OK) {

            // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
            // LatLngBounds 객체에 좌표를 추가합니다
            var bounds = new daum.maps.LatLngBounds();

            for (var i=0; i<data.places.length; i++) {
                bounds.extend(new daum.maps.LatLng(data.places[i].latitude, data.places[i].longitude));
            }

            // 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다
            map.setBounds(bounds);
        }
    }

    $('#searchForm').submit(function(e) {
        e.preventDefault();
        if ($('#search').val()) {
            ps.keywordSearch($('#search').val(), placesSearchCB);
        }
    });

    var selectItem = function(idx) {
        var item = items[idx];
        $('#description .title').text(item.name);
        $('#description .text').text(item.description);
        if (item.forceEnded) {
            $('#description .duration').text('기간 종료됨');
        } else if (item.startDate && item.endDate) {
            $('#description .duration').text('기간 : ' + item.startDate + '~' + item.endDate);
        } else if (item.endDate) {
            $('#description .duration').text('기간 : ~' + item.endDate);
        } else {
            $('#description .duration').text('기간 알 수 없음');
        }
        $('#description .keyword').text('어라운드 검색 키워드 : ' + item.keyword);
        $('#description .images').empty();
        for (var i = 0; item.images && i < item.images.length; i++) {
            $('#description .images').append($('<img>', {src: item.images[i]}));
        }
        $('#description').show();
    };
</script>

</body>
</html>
